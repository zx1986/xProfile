# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

autoload -U +X bashcompinit && bashcompinit
autoload -U +X compinit && compinit

# Pre-setup (environment variables, paths, theme config)
{{ template "zsh_pre_setup" . }}

# OMZ plugins (sourced from ~/.config/zsh/parts)
source {{ .chezmoi.homeDir }}/.config/zsh/parts/omz-git.zsh
source {{ .chezmoi.homeDir }}/.config/zsh/parts/omz-git.plugin.zsh
source {{ .chezmoi.homeDir }}/.config/zsh/parts/omz-kube-ps1.plugin.zsh
source {{ .chezmoi.homeDir }}/.config/zsh/parts/omz-kubectl.plugin.zsh

# Post-setup (tool lazy-loading, custom functions, aliases)
{{ template "zsh_post_setup" . }}
